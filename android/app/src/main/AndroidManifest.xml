<manifest xmlns:android="http://schemas.android.com/apk/res/android">

  <!-- Permisos necesarios -->
  <!-- PERMISOS DE UBICACIÓN -->
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> <!-- Acceso a ubicación aproximada (por WiFi y red móvil) -->
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> <!-- Acceso a ubicación precisa mediante GPS -->
  <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION"/> <!-- Permite obtener ubicación incluso cuando la app está en segundo plano -->

  <!-- SERVICIOS EN PRIMER PLANO -->
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE"/> <!-- Permite ejecutar servicios en primer plano -->
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE_LOCATION"/> <!-- Permite que un servicio en primer plano acceda a la ubicación -->

  <!-- PERMISOS DE CÁMARA E INTERNET -->
  <uses-permission android:name="android.permission.CAMERA"/> <!-- Uso de la cámara del dispositivo -->
  <uses-permission android:name="android.permission.INTERNET"/> <!-- Acceso a Internet (requerido para conexiones de red o APIs) -->

  <!-- INTERFAZ Y NOTIFICACIONES -->
  <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> <!-- Mostrar ventanas o superposiciones sobre otras apps -->
  <uses-permission android:name="android.permission.VIBRATE"/> <!-- Permitir vibración del dispositivo -->
  <uses-permission android:name="android.permission.POST_NOTIFICATIONS"/> <!-- Mostrar notificaciones al usuario -->

  <!-- PUBLICIDAD Y ANALÍTICA -->
  <uses-permission android:name="com.google.android.gms.permission.AD_ID"/> <!-- Acceso al identificador de anuncios de Google -->

  <!-- ALMACENAMIENTO Y MULTIMEDIA -->
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> <!-- Leer archivos del almacenamiento externo -->
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> <!-- Escribir archivos en el almacenamiento externo -->
  <uses-permission android:name="android.permission.ACCESS_MEDIA_LOCATION"/> <!-- Acceder a datos de ubicación de archivos multimedia (fotos, vídeos, etc.) -->
  <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
  <!-- Consultas de intent -->
  <queries>
    <intent>
      <action android:name="android.intent.action.VIEW"/>
      <category android:name="android.intent.category.BROWSABLE"/>
    </intent>
    <!-- Permitir consultas para llamadas telefónicas -->
    <intent>
      <action android:name="android.intent.action.DIAL" />
      <data android:scheme="tel" />
    </intent>
      <intent>
      <action android:name="android.intent.action.DIAL" />
      <data android:scheme="telprompt" />
    </intent>
  </queries>

  <!-- Configuración de la aplicación -->
  <application
    android:name=".MainApplication"
    android:label="@string/app_name"
    android:icon="@mipmap/ic_launcher"
    android:roundIcon="@mipmap/ic_launcher"
    android:allowBackup="true"
    android:theme="@style/AppTheme"
    android:supportsRtl="true"
    android:requestLegacyExternalStorage="true"
    android:usesCleartextTraffic="true">

    <!-- Clave de API de Google Maps -->
    <meta-data
      android:name="com.google.android.geo.API_KEY"
      android:value="@string/google_maps_key"/>

    <!-- Otros meta-datos de Expo -->
    <meta-data android:name="expo.modules.updates.ENABLED" android:value="false"/>
    <meta-data android:name="expo.modules.updates.EXPO_UPDATES_CHECK_ON_LAUNCH" android:value="ALWAYS"/>
    <meta-data android:name="expo.modules.updates.EXPO_UPDATES_LAUNCH_WAIT_MS" android:value="0"/>

    <!-- Declaración de que NO se utiliza ID de publicidad -->
    <meta-data
      android:name="com.google.android.gms.ads.AD_ID_OPT_OUT"
      android:value="true" />

    <!-- Actividad principal -->
    <activity
      android:name=".MainActivity"
      android:configChanges="keyboard|keyboardHidden|orientation|screenSize|screenLayout|uiMode"
      android:launchMode="singleTask"
      android:windowSoftInputMode="adjustResize"
      android:theme="@style/Theme.App.SplashScreen"
      android:exported="true"
      android:screenOrientation="portrait">

      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
      </intent-filter>

      <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <data android:scheme="myapp"/>
        <data android:scheme="com.anonymous.lutencio"/>
      </intent-filter>
    </activity>
  </application>
</manifest>
